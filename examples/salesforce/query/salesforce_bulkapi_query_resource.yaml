flow:
  name: "salesforce_bulkapi_query_resource"
  require_leader_election: true
  tasks:

    # Run this task on specified intervals.
    - generate:
        name: "generate_jobs"
        interval: 60

    # Create Salesforce BulkAPI query job using external SOQL file.
    - salesforce_bulkapi_job_creator:
        name: "account_salesforce_query_job"
        credentials_path: "/etc/sfdc/credentials.json"
        job_type: "query"
        operation: "query"
        query:
          resource: "salesforce/fetch_accounts.soql"
        content_type: "csv"
        column_delimiter: "comma"
        line_ending: "crlf"
